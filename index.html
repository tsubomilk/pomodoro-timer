<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="favicon.ico">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP:wght@300;400&family=Zen+Kurenaido&display=swap" rel="stylesheet">
<title>ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ã‚¿ã‚¤ãƒãƒ¼</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    text-align: center;
    background-color: #f5f5f5;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: 'IBM Plex Sans JP', sans-serif;
    font-family: 'Courier New','Zen Kurenaido', sans-serif;
  }
  .container {
    background-color: #ffffff;
    padding: 50px;
    margin: 12px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  .timer {
    font-size: 2em;
    color: #333333;
    margin: 20px;
    font-variant-numeric: tabular-nums;
  }
  #toggleButton {
    font-size: 1.5em;
    padding: 10px 20px;
    margin: 10px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    outline: none;
  }
  #toggleButton:hover {
    background-color: #0056b3;
  }
</style>
</head>
<body>

<div class="container">
  <div id="currentTime" class="timer"></div>
  <div id="workTime" class="timer">WorkğŸ§‘â€ğŸ’»: 25:00</div>
  <div id="breakTime" class="timer">Breakâ˜•ï¸: 5:00</div>
  <button id="toggleButton" onclick="toggleTimer()">START</button>
  <audio id="bell" src="bell.mp3" preload="auto"></audio> 
</div>

<script>
  let workTime = 25 * 60; // 25 minutes
  let breakTime = 5 * 60; // 5 minutes
  let isRunning = false;
  let isWorkTime = true;
  let interval;

  // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  const storedWorkTime = localStorage.getItem('workTime');
  const storedBreakTime = localStorage.getItem('breakTime');
  const storedIsWorkTime = localStorage.getItem('isWorkTime');

  if (storedWorkTime) {
    workTime = parseInt(storedWorkTime, 10);
  }

  if (storedBreakTime) {
    breakTime = parseInt(storedBreakTime, 10);
  }

  if (storedIsWorkTime) {
    isWorkTime = JSON.parse(storedIsWorkTime);
  }

  function updateCurrentTime() {
    const now = new Date();
    document.getElementById('currentTime').textContent = 'Current: ' + now.toLocaleTimeString('ja-JP');
  }

  // ä»¥ä¸‹ã®éƒ¨åˆ†ã§ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ã®æ™‚é–“ã‚’æ›´æ–°
document.getElementById('workTime').textContent = 'WorkğŸ§‘â€ğŸ’»: ' + formatTime(workTime);
document.getElementById('breakTime').textContent = 'Breakâ˜•ï¸: ' + formatTime(breakTime);


 function toggleTimer() {
  if (isRunning) {
    clearInterval(interval);
    document.getElementById('toggleButton').textContent = 'START';
    isRunning = false;
  } else {
    if (isWorkTime) {
      startWorkTimer();
    } else {
      startBreakTimer();
    }
    document.getElementById('toggleButton').textContent = 'STOP';
    isRunning = true;
  }
}

function startWorkTimer() {
  interval = setInterval(() => {
    workTime--;
    document.getElementById('workTime').textContent = 'WorkğŸ§‘â€ğŸ’»: ' + formatTime(workTime);
    // ä»¥ä¸‹ã®éƒ¨åˆ†ã§ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
    localStorage.setItem('workTime', workTime.toString());

    if (workTime <= 0) {
      clearInterval(interval);
      playBell();
      isWorkTime = false;
      breakTime = 5 * 60;
      localStorage.setItem('breakTime', breakTime.toString());
      localStorage.setItem('isWorkTime', JSON.stringify(isWorkTime));
      toggleTimer();
    }
  }, 1000);
}

function startBreakTimer() {
  interval = setInterval(() => {
    breakTime--;
    document.getElementById('breakTime').textContent = 'Breakâ˜•ï¸: ' + formatTime(breakTime);
    localStorage.setItem('breakTime', breakTime.toString());

    if (breakTime <= 0) {
      clearInterval(interval);
      alert('Complete Tasks Togetherï¼');
      isWorkTime = true;
      workTime = 25 * 60;
      localStorage.setItem('workTime', workTime.toString());
      localStorage.setItem('isWorkTime', JSON.stringify(isWorkTime));
      toggleTimer();
    }
  }, 1000);
}

  function playBell() {
    const bell = document.getElementById('bell');
    bell.play();
  }

  function formatTime(seconds) {
  var mins = Math.floor(seconds / 60);
  var secs = seconds % 60;
  return (mins < 10 ? '0' : '') + mins + ':' + (secs < 10 ? '0' : '') + secs;
  }

  // Update current time every second
  setInterval(updateCurrentTime, 1000);
</script>

</body>
</html>
